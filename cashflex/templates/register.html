{% extends 'base_auth.html' %} 
{% block content %}
<div class="container d-flex justify-content-center align-items-center" style="min-height: 100vh;">

  <!-- Card Registro -->
  <div class="card shadow-lg border-0 p-4" style="max-width: 430px; width: 100%; border-radius: 1.25rem;">

    <!-- Cabe√ßalho -->
    <div class="text-center mb-4">
      <div class="rounded-circle bg-primary d-flex align-items-center justify-content-center mx-auto mb-3" 
           style="width:70px; height:70px;">
        <i class="bi bi-person-plus text-white fs-2"></i>
      </div>
      <h3 class="fw-bold text-primary">Criar Conta</h3>
      <p class="text-muted small">Junte-se √† <span class="fw-bold text-primary">Cash Flex</span> e comece a investir hoje.</p>
    </div>

    <!-- Formul√°rio -->
    <form method="POST">
      {{ form.hidden_tag() }}

      <!-- Telefone -->
      <div class="form-floating mb-3">
        {{ form.phone(class="form-control shadow-sm rounded-3", placeholder="923000000") }}
        <label class="text-muted">üì± N√∫mero de Telefone</label>
        {% if form.phone.errors %}
          <div class="text-danger small mt-1">{{ form.phone.errors[0] }}</div>
        {% endif %}
      </div>

      <!-- Senha -->
      <div class="form-floating mb-3 position-relative">
        {{ form.password(class="form-control shadow-sm rounded-3", id="passwordField", placeholder="********") }}
        <label class="text-muted">üîí Senha</label>
        <button type="button" class="btn btn-sm btn-link position-absolute top-50 end-0 translate-middle-y me-2" 
                onclick="togglePassword()" tabindex="-1">
          <i class="bi bi-eye text-secondary" id="toggleIcon"></i>
        </button>
        {% if form.password.errors %}
          <div class="text-danger small mt-1">{{ form.password.errors[0] }}</div>
        {% endif %}
      </div>

      <!-- C√≥digo de Convite -->
      <div class="form-floating mb-4">
        {{ form.referred_by(class="form-control shadow-sm rounded-3", placeholder="C√≥digo de convite") }}
        <label class="text-muted">üéüÔ∏è C√≥digo de Convite</label>
        {% if form.referred_by.errors %}
          <div class="text-danger small mt-1">{{ form.referred_by.errors[0] }}</div>
        {% endif %}
      </div>

      <!-- Bot√£o Criar Conta -->
      <div class="d-grid mb-3">
        <button type="submit" class="btn btn-primary btn-lg fw-bold shadow-sm rounded-3">
          Criar Conta
        </button>
      </div>

      <!-- Link para login -->
      <div class="text-center">
        <p class="text-muted small mb-1">J√° possui uma conta?</p>
        <a href="{{ url_for('main.login') }}" class="btn btn-outline-primary btn-sm px-4 rounded-pill">
          Entrar
        </a>
      </div>
    </form>
  </div>
</div>

<!-- Script para mostrar/esconder senha -->
<script>
  function togglePassword() {
    const field = document.getElementById('passwordField');
    const icon = document.getElementById('toggleIcon');
    if (field.type === 'password') {
      field.type = 'text';
      icon.classList.replace('bi-eye', 'bi-eye-slash');
    } else {
      field.type = 'password';
      icon.classList.replace('bi-eye-slash', 'bi-eye');
    }
  }
</script>

<!-- √çcones Bootstrap -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
{% endblock %}
